<script>
  const latestPDF = "Bakeido_TnC_Surprise_Gift_Offer.txt";

  const canvas = document.getElementById("fireworks");
  const ctx = canvas.getContext("2d");
  const fireSound = document.getElementById("fireSound");

  canvas.width = innerWidth;
  canvas.height = innerHeight;

  function fireworkBurst(x, y) {
    for (let i = 0; i < 70; i++) {
      const angle = Math.random() * Math.PI * 2;
      const speed = Math.random() * 5 + 2;
      let px = x;
      let py = y;
      let life = 55;

      const interval = setInterval(() => {
        ctx.fillStyle = `hsl(${Math.random()*360},100%,70%)`;
        ctx.beginPath();
        ctx.arc(px, py, 2, 0, Math.PI * 2);
        ctx.fill();

        px += Math.cos(angle) * speed;
        py += Math.sin(angle) * speed;

        if (--life <= 0) clearInterval(interval);
      }, 16);
    }
  }

  function launchMultipleFireworks() {
    const bursts = Math.floor(Math.random() * 3) + 7; // 7â€“9
    for (let i = 0; i < bursts; i++) {
      setTimeout(() => {
        fireworkBurst(
          Math.random() * canvas.width,
          Math.random() * canvas.height * 0.7
        );
      }, i * 180);
    }
  }

  /* ðŸŽ† Fireworks + sound */
  setTimeout(() => {
    fireSound.volume = 0.7;
    fireSound.play().catch(() => {});
    launchMultipleFireworks();
  }, 600);

  /* ðŸŒ«ï¸ Fade out near the end */
  setTimeout(() => {
    document.body.classList.add("fade-out");
  }, 4200);

  /* ðŸš€ Redirect at 5 seconds */
  setTimeout(() => {
    window.location.href = latestPDF + "?v=" + Date.now();
  }, 5000);
</script>
